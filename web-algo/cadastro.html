<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro — UCS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="includes/css/main.css">
    <link rel="stylesheet" href="includes/css/auth.css">
</head>

<body class="d-flex align-items-center justify-content-center" style="min-height:100vh">
    <div class="login-card col-11 col-sm-8 col-lg-4">
        <img src="./includes/media/Logo_UCS_Vertical_PNG.png" alt="UCS" class="ucs-logo">

        <form id="registerForm">
            <!-- Step 1 -->
            <div class="step active">
                <label for="rg_name" class="form-label">Nome completo</label>
                <input id="rg_name" name="rg_name" class="form-control" required>

                <label for="rg_role" class="form-label">Quem é você?</label>
                <select id="rg_role" name="rg_role" class="form-select" required>
                    <option value="" selected disabled>Selecione…</option>
                    <option value="ALUNO">Aluno</option>
                    <option value="PROFESSOR">Professor</option>
                    <option value="OUTRO">Outro</option>
                </select>

                <button type="button" class="btn btn-primary w-100 mt-4 next">Continuar</button>
            </div>

            <!-- Step 2 -->
            <div class="step">
                <div class="mb-3">
                    <label for="rg_state" class="form-label">Estado</label>
                    <select id="rg_state" name="rg_state" class="form-select" required>
                        <option value="" selected disabled>Selecione o estado…</option>
                        <!-- opções dos estados -->
                    </select>
                </div>
                <div class="mb-3">
                    <label for="rg_city" class="form-label">Cidade</label>
                    <input id="rg_city" name="rg_city" class="form-control" required>
                </div>
                <button type="button" class="btn btn-primary w-100 mt-4 next">Continuar</button>
                <button type="button" class="btn btn-outline-secondary w-100 mt-2 prev">Voltar</button>
            </div>

            <!-- Step 3 -->
            <div class="step">
                <fieldset>
                    <legend class="form-label">Sexo</legend>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="rg_sex_m" name="rg_sex" value="M" checked>
                        <label class="form-check-label" for="rg_sex_m">Masculino</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="rg_sex_f" name="rg_sex" value="F">
                        <label class="form-check-label" for="rg_sex_f">Feminino</label>
                    </div>
                </fieldset>
                <button type="button" class="btn btn-primary w-100 mt-4 next">Continuar</button>
                <button type="button" class="btn btn-outline-secondary w-100 mt-2 prev">Voltar</button>
            </div>

            <!-- Step 4 -->
            <div class="step">
                <label for="rg_email" class="form-label">E-mail</label>
                <input id="rg_email" name="rg_email" type="email" class="form-control" required>

                <label for="rg_login" class="form-label">Login (7–10)</label>
                <input id="rg_login" name="rg_login" minlength="7" maxlength="10" class="form-control" required>

                <button type="button" class="btn btn-primary w-100 mt-4 next">Continuar</button>
                <button type="button" class="btn btn-outline-secondary w-100 mt-2 prev">Voltar</button>
            </div>

            <!-- Step 5 -->
            <div class="step">
                <label for="rg_pwd" class="form-label">Senha</label>
                <input id="rg_pwd" name="rg_pwd" type="password" minlength="7" maxlength="10" class="form-control"
                    required>

                <label for="rg_pwd2" class="form-label mt-3">Confirmar senha</label>
                <input id="rg_pwd2" name="rg_pwd2" type="password" minlength="7" maxlength="10" class="form-control"
                    required>

                <button type="submit" class="btn btn-success w-100 mt-4">Finalizar</button>
                <button type="button" class="btn btn-outline-secondary w-100 mt-2 prev">Voltar</button>
            </div>

        </form>

        <div class="link-options">
            <a href="/web-algo/login.html" id="signInLink">Já tem uma conta? Entre</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="./includes/js/auth/signup.js"></script>
    <script>
        const steps = document.querySelectorAll(".step");
        let currentStep = 0;

        function showStep(n) {
            steps.forEach((s, i) => s.classList.toggle("active", i === n));
        }

        // valida os campos obrigatórios do step atual
        function validateStep(stepIndex) {
            const inputs = steps[stepIndex].querySelectorAll("input, select, textarea");
            for (let input of inputs) {
                if (!input.checkValidity()) {
                    input.reportValidity(); // mostra a mensagem do browser
                    return false;
                }
            }
            return true;
        }

        document.querySelectorAll(".next").forEach(btn => {
            btn.addEventListener("click", () => {
                if (validateStep(currentStep)) {
                    if (currentStep < steps.length - 1) {
                        currentStep++;
                        showStep(currentStep);
                    }
                }
            });
        });

        document.querySelectorAll(".prev").forEach(btn => {
            btn.addEventListener("click", () => {
                if (currentStep > 0) {
                    currentStep--;
                    showStep(currentStep);
                }
            });
        });
    </script>
</body>

</html>